arches:
- x86_64
content:
  source:
    dockerfile: Dockerfile.rhel
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/cluster-api-provider-alibaba.git
      web: https://github.com/openshift/cluster-api-provider-alibaba
    ci_alignment:
      streams_prs:
        ci_build_root:
          stream: rhel-8-golang-ci-build-root
    modifications:
      # Konflux build fails because it's building on detached mode (since it doesn't fetch the branch and just the commit)
      - action: replace
        match: "GOPROXY=off NO_DOCKER=1 make build"
        replacement: "git checkout -b rhaos-{MAJOR}.{MINOR}-rhel8 && GOPROXY=off NO_DOCKER=1 make build"
for_payload: true
from:
  builder:
  - stream: golang
  member: openshift-enterprise-base
name: openshift/ose-alibaba-machine-controllers
owners:
- mimccune@redhat.com
- jspeed@redhat.com
- mfedosin@redhat.com
- dmoiseev@redhat.com
- ademicev@redhat.com
konflux:
  tagging_mode: enabled
delivery:
  delivery_repo_names:
  - openshift4/ose-alibaba-machine-controllers-rhel8
